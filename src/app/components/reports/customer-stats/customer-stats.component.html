<div class="row">
  <div class="col-lg-12 grid-margin">
    <div class="card">
      <div class="card-body">
        <p class="card-title">{{ 'PAGES.Titles.ReportsList.CustomerStates' | translate }}</p>

        <form #f="ngForm">

          <div class="form-group row">
            <div class="col-md-5 form-group">
              <label class="form-label">{{'PAGES.Labels.FromDate' | translate}}</label>
              <div class="input-group">
                <input [(ngModel)]="fecha" name="fecha" class="form-control" placeholder="yyyy-mm-dd" name="dp"
                  ngbDatepicker #d1="ngbDatepicker">
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary" (click)="d1.toggle()" type="button">
                    <i class="fa fa-calendar"></i>
                  </button>
                </div>
              </div>
            </div>

            <div class="col-xs-6 col-md-6" style="margin-top:25px">
              <button *ngIf="!loading" type="button" (click)="getData()"
                class="btn btn-primary">{{'PAGES.Buttons.Search' | translate}}
                <i class="fa fa-search"></i>
              </button>
              <button *ngIf="loading" [disabled]="true" class="btn btn-primary">
                <i class="fa fa-spin fa-sync"></i>
                Espere...
              </button>
            </div>
          </div>

        </form>

        <ng-container *ngIf="!loading">

          <hr><br>

          <div class="row">
            <div class="col-lg-12 grid-margin">
              <div class="table-responsive">
                <p>{{'PAGES.Labels.Devices' | translate}}</p>
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th class="w-25 p-3">
                        {{'PAGES.Labels.Os' | translate}}
                      </th>
                      <th class="w-auto p-3">
                        Cant
                      </th>
                      <th class="w-auto p-3">
                        %
                      </th>
                      <th class="w-50 p-3">
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="table-success">
                      <td class="font-weight-medium w-25 p-3">
                        Android
                      </td>
                      <td class="w-auto p-3">
                        {{(estadisticas.totalAndroid | number).replace(',','.')}}
                      </td>
                      <td class="w-auto p-3">
                        {{estadisticas.porcentAndroid}}%
                      </td>
                      <td>
                        <div class="progress">
                          <div class="progress-bar bg-primary progress-bar-striped progress-bar-animated"
                            role="progressbar" [style.width]="estadisticas.porcentAndroid + '%'"></div>
                        </div>
                      </td>
                    </tr>
                    <tr class="table-primary">
                      <td class="font-weight-medium w-25 p-3">
                        iOS
                      </td>
                      <td class="w-auto p-3">
                        {{(estadisticas.totalIos | number).replace(',','.')}}
                      </td>
                      <td class="w-auto p-3">
                        {{estadisticas.porcentIos}}%
                      </td>
                      <td>
                        <div class="progress">
                          <div class="progress-bar bg-success progress-bar-striped progress-bar-animated"
                            role="progressbar" [style.width]="estadisticas.porcentIos + '%'"></div>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td class="font-weight-medium w-25 p-3">
                        TOTAL
                      </td>
                      <td class="w-auto p-3">
                        {{(estadisticas.total | number).replace(',','.')}}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <br>
          <hr><br>

          <div class="row">
            <div class="col-lg-6 grid-margin">
              <div class="table-responsive">
                <p>Android</p>
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th class="w-auto p-3">
                        {{'PAGES.Labels.Versions' | translate}}
                      </th>
                      <th class="w-auto p-3">
                        Cant
                      </th>
                      <th class="w-auto p-3">
                        %
                      </th>
                      <th class="w-75 p-3">
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of estadisticas.versionesAndroid">
                      <td class="font-weight-medium w-auto p-3">
                        {{item.version}}
                      </td>
                      <td class="w-auto p-3">
                        {{(item.total | number).replace(',','.')}}
                      </td>
                      <td class="w-auto p-3">
                        {{item.porcentaje}}%
                      </td>
                      <td>
                        <div class="progress">
                          <div class="progress-bar bg-primary progress-bar-striped progress-bar-animated"
                            role="progressbar" [style.width]="item.porcentaje + '%'"></div>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="col-lg-6 grid-margin">
              <div class="table-responsive">
                <p>iOS</p>
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th class="w-auto p-3">
                        {{'PAGES.Labels.Versions' | translate}}
                      </th>
                      <th class="w-auto p-3">
                        Cant
                      </th>
                      <th class="w-auto p-3">
                        %
                      </th>
                      <th class="w-75 p-3">
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of estadisticas.versionesIos">
                      <td class="font-weight-medium w-auto p-3">
                        {{item.version}}
                      </td>
                      <td class="w-auto p-3">
                        {{(item.total | number).replace(',','.')}}
                      </td>
                      <td class="w-auto p-3">
                        {{item.porcentaje}}%
                      </td>
                      <td>
                        <div class="progress">
                          <div class="progress-bar bg-primary progress-bar-striped progress-bar-animated"
                            role="progressbar" [style.width]="item.porcentaje + '%'"></div>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <br><hr><br>

          <div class="row">
            <div class="table-responsive">
              <p>{{'PAGES.Labels.Users' | translate}} Android</p>
              <table class="table table-striped table-sm">
                <thead>
                  <tr>
                    <th>
                      {{ 'PAGES.TableHeaders.PingDate' | translate }}
                    </th>
                    <th>
                      {{'PAGES.TableHeaders.DocumentNumber' | translate}}
                    </th>
                    <th>
                      {{'PAGES.TableHeaders.Names' | translate}}
                    </th>
                    <th>
                      {{'PAGES.TableHeaders.Email' | translate}}
                    </th>
                    <th>
                      {{'PAGES.TableHeaders.Phone' | translate}}
                    </th>

                  </tr>
                </thead>
                <tbody>
                  <tr
                    *ngFor="let cliente of estadisticas.personaDispositivoDroid | slice: (tab1Page-1) * pageSize : (tab1Page-1) * pageSize + pageSize">
                    <td>
                      {{cliente.fechaPing}}
                    </td>
                    <td>
                      {{cliente.nroDocumento}}
                    </td>
                    <td>
                      {{cliente.nombres + " " + cliente.apellidos}}
                    </td>
                    <td>
                      {{cliente.email}}
                    </td>
                    <td>
                      {{cliente.telefono}}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <ngb-pagination class="d-flex justify-content-center pagination-rounded-flat" [pageSize]="pageSize"
              [collectionSize]="estadisticas.personaDispositivoDroid.length" [(page)]="tab1Page" [maxSize]="10"
              [rotate]="true" [boundaryLinks]="true">
            </ngb-pagination>
          </div>

          <br><hr><br>

          <div class="row">
            <div class="table-responsive">
              <p>{{'PAGES.Labels.Users' | translate}} iOS</p>
              <table class="table table-striped table-sm">
                <thead>
                  <tr>
                    <th>
                      {{ 'PAGES.TableHeaders.PingDate' | translate }}
                    </th>
                    <th>
                      {{'PAGES.TableHeaders.DocumentNumber' | translate}}
                    </th>
                    <th>
                      {{'PAGES.TableHeaders.Names' | translate}}
                    </th>
                    <th>
                      {{'PAGES.TableHeaders.Email' | translate}}
                    </th>
                    <th>
                      {{'PAGES.TableHeaders.Phone' | translate}}
                    </th>

                  </tr>
                </thead>
                <tbody>
                  <tr
                    *ngFor="let cliente of estadisticas.personaDispositivoIos | slice: (tab2Page-1) * pageSize : (tab2Page-1) * pageSize + pageSize">
                    <td>
                      {{cliente.fechaPing}}
                    </td>
                    <td>
                      {{cliente.nroDocumento}}
                    </td>
                    <td>
                      {{cliente.nombres + " " + cliente.apellidos}}
                    </td>
                    <td>
                      {{cliente.email}}
                    </td>
                    <td>
                      {{cliente.telefono}}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <ngb-pagination class="d-flex justify-content-center pagination-rounded-flat" [pageSize]="pageSize"
              [collectionSize]="estadisticas.personaDispositivoIos.length" [(page)]="tab2Page" [maxSize]="10"
              [rotate]="true" [boundaryLinks]="true">
            </ngb-pagination>
          </div>

        </ng-container>
      </div>
    </div>
  </div>
</div>
